import{b as re}from"./chunk-HJTJQZF3-CNhMJ5mL.js";import{f as ne,b as A,e as $}from"./index-DRKi_ZKH.js";import{r as d,R as F}from"./index-Br2k6vyu.js";import{_ as ie,a as oe}from"./objectWithoutPropertiesLoose-Cv5OCJ0e.js";import{C as ae}from"./chunk-M3MASYO7-BJmKlK-9.js";import{j as s}from"./jsx-runtime-D_zvdyIk.js";var se=d.useLayoutEffect,de=function(e){var t=F.useRef(e);return se(function(){t.current=e}),t},k=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},ue=function(e,t){var r=F.useRef();return F.useCallback(function(i){e.current=i,r.current&&k(r.current,null),r.current=t,t&&k(t,i)},[t])},N={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},le=function(e){Object.keys(N).forEach(function(t){e.style.setProperty(t,N[t],"important")})},_=le,o=null,O=function(e,t){var r=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?r+t.borderSize:r-t.paddingSize};function ce(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=1/0),o||(o=document.createElement("textarea"),o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),_(o)),o.parentNode===null&&document.body.appendChild(o);var i=n.paddingSize,f=n.borderSize,a=n.sizingStyle,b=a.boxSizing;Object.keys(a).forEach(function(l){var m=l;o.style[m]=a[m]}),_(o),o.value=e;var u=O(o,n);o.value=e,u=O(o,n),o.value="x";var g=o.scrollHeight-i,p=g*t;b==="border-box"&&(p=p+i+f),u=Math.max(p,u);var h=g*r;return b==="border-box"&&(h=h+i+f),u=Math.min(h,u),[u,g]}var G=function(){},fe=function(e,t){return e.reduce(function(r,i){return r[i]=t[i],r},{})},he=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],pe=!!document.documentElement.currentStyle,ge=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var r=fe(he,t),i=r.boxSizing;if(i==="")return null;pe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var f=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),a=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:f,borderSize:a}},ve=ge;function I(n,e,t){var r=de(t);d.useLayoutEffect(function(){var i=function(a){return r.current(a)};if(n)return n.addEventListener(e,i),function(){return n.removeEventListener(e,i)}},[])}var be=function(e,t){I(document.body,"reset",function(r){e.current.form===r.target&&t(r)})},me=function(e){I(window,"resize",e)},xe=function(e){I(document.fonts,"loadingdone",e)},Se=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],ye=function(e,t){var r=e.cacheMeasurements,i=e.maxRows,f=e.minRows,a=e.onChange,b=a===void 0?G:a,u=e.onHeightChange,g=u===void 0?G:u,p=ie(e,Se),h=p.value!==void 0,l=d.useRef(null),m=ue(l,t),H=d.useRef(0),y=d.useRef(),v=function(){var c=l.current,C=r&&y.current?y.current:ve(c);if(C){y.current=C;var x=ce(C,c.value||c.placeholder||"x",f,i),S=x[0],w=x[1];H.current!==S&&(H.current=S,c.style.setProperty("height",S+"px","important"),g(S,{rowHeight:w}))}},R=function(c){h||v(),b(c)};return d.useLayoutEffect(v),be(l,function(){if(!h){var z=l.current.value;requestAnimationFrame(function(){var c=l.current;c&&z!==c.value&&v()})}}),me(v),xe(v),d.createElement("textarea",oe({},p,{onChange:R,ref:m}))},ze=d.forwardRef(ye),U=ne(({style:n,minRows:e=3,maxRows:t=8,cacheMeasurements:r=!1,disableAutosize:i=!1,onHeightChange:f,...a},b)=>{const{Component:u,label:g,description:p,startContent:h,endContent:l,hasHelper:m,shouldLabelBeOutside:H,shouldLabelBeInside:y,isInvalid:v,errorMessage:R,getBaseProps:z,getLabelProps:c,getInputProps:C,getInnerWrapperProps:x,getInputWrapperProps:S,getHelperWrapperProps:w,getDescriptionProps:Y,getErrorMessageProps:q,isClearable:T,getClearButtonProps:W}=re({...a,ref:b,isMultiline:!0}),[D,X]=d.useState(e>1),[Z,J]=d.useState(!1),P=g?s.jsx("label",{...c(),children:g}):null,L=C(),K=(E,j)=>{if(e===1&&X(E>=j.rowHeight*2),t>e){const te=E>=t*j.rowHeight;J(te)}f==null||f(E,j)},M=i?s.jsx("textarea",{...L,style:A(L.style,n??{})}):s.jsx(ze,{...L,cacheMeasurements:r,"data-hide-scroll":$(!Z),maxRows:t,minRows:e,style:A(L.style,n??{}),onHeightChange:K}),Q=d.useMemo(()=>T?s.jsx("button",{...W(),children:s.jsx(ae,{})}):null,[T,W]),V=d.useMemo(()=>h||l?s.jsxs("div",{...x(),children:[h,M,l]}):s.jsx("div",{...x(),children:M}),[h,L,l,x]),B=v&&R,ee=B||p;return s.jsxs(u,{...z(),children:[H?P:null,s.jsxs("div",{...S(),"data-has-multiple-rows":$(D),children:[y?P:null,V,Q]}),m&&ee?s.jsx("div",{...w(),children:B?s.jsx("div",{...q(),children:R}):s.jsx("div",{...Y(),children:p})}):null]})});U.displayName="HeroUI.Textarea";var je=U;export{je as t};

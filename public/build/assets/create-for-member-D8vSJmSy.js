import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{C as b}from"./custom-input-BXut3MJ7.js";import{C as n}from"./custom-select-DSMOB1PW.js";import{m as x}from"./index.esm-ByNbkwyk.js";import{r as S}from"./index-Br2k6vyu.js";import{m as v,a as C,b as y,c as M,d as A}from"./chunk-3BLMMOBU-D8o3ebAF.js";import{l as d}from"./chunk-OBFX2YGI-CL3YCrV8.js";import{a as P}from"./chunk-A6PX3NG3-Dsb3cqDh.js";import{b as c}from"./chunk-GT2IF6NJ-BTWKXWuZ.js";import"./chunk-HJTJQZF3-CNhMJ5mL.js";import"./index-DRKi_ZKH.js";import"./index-_tZa__md.js";import"./useControlledState-DZ8hS4K2.js";import"./chunk-6VC6TS2O-B3iksFJf.js";import"./chunk-SLABUSGS-DJ7WWWAp.js";import"./mergeRefs-DmiLXYt3.js";import"./useLabel-B4BjcDWr.js";import"./chunk-M3MASYO7-BJmKlK-9.js";import"./useMenuTriggerState-6breljWh.js";import"./useDialog-DWysrGHo.js";import"./FocusScope-Dqv2N7f4.js";import"./VisuallyHidden-D21Owd9S.js";import"./context-4x7w5JDY.js";import"./useCollator-Cqx0QUhy.js";import"./useMenuTrigger-DKnkbyPy.js";import"./SelectionManager-DVXmuDWl.js";import"./chunk-6JWJ7CFW-_Kan1Sv2.js";import"./chunk-GQT3YUX3-FQ1U8E7v.js";import"./getItemCount-B1PudtaV.js";import"./chunk-XPO5AVRM-CK8zi_F2.js";import"./chunk-7F3ZLNJ6-DjDYQXym.js";import"./chunk-4EXC76WE-GsHGN1t1.js";import"./chunk-3JRSRN3Z-C5pH4duU.js";import"./index-Co3zkiwm.js";import"./chunk-IHO36JMK-YlB-SltU.js";import"./index-CHfjlJ8V.js";function I({superiors:g,department:f,roles:h,isOpen:p,setOpen:s,user:a,members:_}){const{data:l,setData:r,errors:i,post:j,processing:u}=x({id:"",user_ids:[],job_title:"",parent_id:"",role_id:[],department_id:""});return S.useEffect(()=>{var e,o;a&&(r("id",String(a.id)),r("job_title",a.job_title),r("parent_id",(e=a.parent_id)==null?void 0:e.toString()),r("role_id",a.roles.map(m=>m.id.toString())),r("user_ids",_.map(m=>m.id.toString())),r("department_id",(o=a.department_id)==null?void 0:o.toString()))},[a]),t.jsx(v,{isOpen:p,onOpenChange:()=>s(!p),children:t.jsxs(C,{children:[t.jsx(y,{children:"Tambah Anggota Dari Member"}),t.jsxs(M,{className:"flex flex-col gap-4",children:[t.jsx(n,{selectionMode:"multiple",isInvalid:!!i.user_ids,errorMessage:i.user_ids,selectedKeys:new Set(l.user_ids.map(String)),label:"Anggota",placeholder:"Pilih Anggota",onSelectionChange:e=>{const o=Array.from(e).map(String);r("user_ids",o)},children:_.map(e=>{var o;return t.jsx(d,{startContent:t.jsx(P,{src:(o=e==null?void 0:e.profile)==null?void 0:o.photo}),children:`${e.name} - ${e.nia}`},e.id)})}),t.jsx(b,{isInvalid:!!i.job_title,errorMessage:i.job_title,label:"Tugas dan tanggung jawab",placeholder:"Masukan Tugas dan tanggung jawab",value:l.job_title,onChange:e=>r("job_title",e.target.value)}),t.jsx(n,{isInvalid:!!i.parent_id,errorMessage:i.parent_id,selectedKeys:[l.parent_id],label:"Atasan",placeholder:"Pilih Atasan",onChange:e=>r("parent_id",e.target.value),children:g.filter(e=>e.id!==(a==null?void 0:a.id)).map(e=>t.jsx(d,{children:e.name},e.id))}),t.jsx(n,{selectedKeys:[l.department_id],isInvalid:!!i.department_id,errorMessage:i.department_id,label:"Department",placeholder:"Pilih Department",onChange:e=>r("department_id",e.target.value),children:f.map(e=>t.jsx(d,{children:e.name},e.id))}),t.jsx(n,{selectionMode:"multiple",isInvalid:!!i.role_id,errorMessage:i.role_id,selectedKeys:new Set(l.role_id.map(String)),label:"Role",placeholder:"Pilih Role",onSelectionChange:e=>{const o=Array.from(e).map(String);r("role_id",o)},children:h.map(e=>t.jsx(d,{children:e.name},e.id))})]}),t.jsxs(A,{children:[t.jsx(c,{variant:"bordered",onPress:()=>s(!1),children:"Batal"}),t.jsx(c,{color:"primary",isLoading:u,onPress:()=>j(route("user.management.member"),{onSuccess:()=>{s(!1)}}),children:"Simpan"})]})]})})}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{I as C,pe as _};
